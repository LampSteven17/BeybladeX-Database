---
interface Props {
  trend: number;
  showValue?: boolean;
  size?: 'sm' | 'md' | 'lg';
}

const { trend, showValue = true, size = 'md' } = Astro.props;

const isUp = trend > 0.1;
const isDown = trend < -0.1;
const isNeutral = !isUp && !isDown;

const sizeClasses = {
  sm: 'text-xs',
  md: 'text-sm',
  lg: 'text-base',
};

const iconSizes = {
  sm: 'w-3 h-3',
  md: 'w-4 h-4',
  lg: 'w-5 h-5',
};
---

<span
  class:list={[
    'inline-flex items-center gap-1 font-mono',
    sizeClasses[size],
    {
      'text-green-400': isUp,
      'text-red-400': isDown,
      'text-cyber-muted': isNeutral,
    },
  ]}
>
  {isUp && (
    <svg class={iconSizes[size]} fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
    </svg>
  )}
  {isDown && (
    <svg class={iconSizes[size]} fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  )}
  {isNeutral && (
    <svg class={iconSizes[size]} fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4" />
    </svg>
  )}
  {showValue && (
    <span>
      {isUp && '+'}
      {(trend * 100).toFixed(0)}%
    </span>
  )}
</span>
